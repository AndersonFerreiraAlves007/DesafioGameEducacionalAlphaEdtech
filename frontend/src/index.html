<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kitchen</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>

    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <main>
        <div id="environment">
            <img id="previous-button" src="../assets/button-icons/previous-arrow-button.png" alt="">
            <span id="environment-text">AMBIENTE</span>
            <img id="next-button" src="../assets/button-icons/next-arrow-button.png" alt="">
        </div>

        <div id="pou"></div>

        <div id="items">
            <img id="previous-item" src="../assets/button-icons/previous-arrow-button.png" alt="">
            <div id="item-box"><img id="current-item" src="" alt=""></div>
            <img id="next-item" src="../assets/button-icons/next-arrow-button.png" alt="">
        </div>
        <script>
            const sceneswithitems = [
                {
                    "name": "cozinha",
                    "url_image": "../assets/background-images/cartoon-set-of-kitchen-counter-with-appliances-fridge-microwave-oven-kettle-blender/1819.jpg",
                    "id": 1,
                    "items": [
                        {
                            "name": 'uvas',
                            "url": "../assets/food-icons/cherries.png"
                        },
                        {
                            "name": 'torradas',
                            "url": "../assets/food-icons/bread-egg.png"
                        },
                        {
                            "name": 'cenoura',
                            "url": "../assets/food-icons/carrot.png"
                        },
                        {
                            "name": 'rosquinha',
                            "url": "../assets/food-icons/donut.png"
                        },
                        {
                            "name": 'batata',
                            "url": "../assets/food-icons/french-fries.png"
                        },
                    ]
                },
                {
                    "name": "jogos",
                    "url_image": "../assets/background-images/vector-cartoon-illustration-of-empty-kindergarten-room-with-furniture-and-toys-for-young-children-n/1926.jpg",
                    "id": 2,
                    "items": [
                        {
                            "name": 'shampoo',
                            "url": "../assets/game-icons/joystick.png"
                        },
                        {
                            "name": 'sabonete',
                            "url": "../assets/food-icons/french-fries.png"
                        },
                    ]
                },
                {
                    "name": "churras",
                    "url_image": "../assets/background-images/modern-bathroom-interior-with-furniture-cartoon/304.jpg",
                    "id": 2,
                    "items": [
                        {
                            "name": 'shampoo',
                            "url": "../assets/game-icons/joystick.png"
                        },
                        {
                            "name": 'sabonete',
                            "url": "../assets/food-icons/french-fries.png"
                        },
                    ]
                }]
            
            const arrayAmbientes = sceneswithitems
            
            // Justing testing drag and drop functionality
            $('#item-box').draggable({ revert: "valid" })
            $('#pou').droppable({
                drop: function (event, ui) {
                    $( this )
                        .addClass('yellow')
                }
            })

            // Onload scene initial status
            let currentScene
            let indexScene = 0
            let indexItem = 0
            updateViewScene()

            function updateViewScene() {
                currentScene = arrayAmbientes[indexScene]
                $('#environment-text').html(currentScene.name)
                $('main').css('background-image', `url( ${currentScene.url_image})`)
                $('#current-item').attr('src', currentScene.items[0].url )
                indexItem = 0
            }

            // Select environment buttons
            $('#next-button').on('click', () => {
                if (currentScene == arrayAmbientes[arrayAmbientes.length - 1]) {
                    indexScene = 0
                } else {
                    indexScene += 1
                }
                updateViewScene()
            })

            $('#previous-button').on('click', () => {
                if (indexScene == 0) {
                    indexScene = arrayAmbientes.length - 1
                } else {
                    indexScene -= 1
                }
                updateViewScene()
            })


            // Select item buttons
            $('#previous-item').on('click', () => {
                if (indexItem == 0) {
                    indexItem = currentScene.items.length - 1
                } else {
                    indexItem -= 1
                }
                currentItem = currentScene.items[indexItem]
                // $('#item-box').html(currentItem.name)
                $('#current-item').attr('src', currentItem.url )
            })

            $('#next-item').on('click', () => {
                if (indexItem == currentScene.items.length - 1) {
                    indexItem = 0
                } else {
                    indexItem += 1
                }
                currentItem = currentScene.items[indexItem]
                // $('#item-box').html(currentItem.name)
                $('#current-item').attr('src', currentItem.url )
            })

        </script>
    </main>
</body>

</html>